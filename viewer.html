<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"/>
    <title>Praat Web</title>
</head>
<body>
    <header class="header_general">
        Audio Processing Web
    </header>
    <p>This website uses Praat (<a href="https://www.fon.hum.uva.nl/praat/">https://www.fon.hum.uva.nl/praat/</a>) for visualizing 
        audio waveform and analysing its pitch, intensity, and formants. You can also procoss the audio by converting it from stereo to mono or reducing its noise, then download the processed audio.
    </p>
    <p style="margin-bottom: 4px;">To zoom the audio you can either</p>
    <ul style="margin-top: 4px;">
        <li>Use the slider below the graph, or</li>
        <li>Choose the start and end time, then click 'Zoom', or</li>
        <li>Select the desired part by dragging on the waveform, then click 'Zoom'</li>
    </ul>
    <button id="play-btn" onclick="playAudio()">Play</button> 
    <form enctype="multipart/form-data" id="mono" method="post" action="/toMono">
    <input type="submit" value="Convert to mono">
    </form>
    <form enctype="multipart/form-data" id="reduce-noise" method="post" action="/toFilter">
    <input type="submit" value="Reduce noise">
    </form>
    <form id="set-zoom-time" method="post">
        Set start time(sec): <input type="number" step=0.01 name="zoom-start" id="zoom-start">
        Set end time(sec): <input type="number" step=0.01 name="zoom-end" id="zoom-end">
        <input type="submit" value="Zoom">
    </form>
    <input type="submit" value="Reset" id="reset" onclick="reset()">
    <form enctype="multipart/form-data" method="post" action="/toHomepage" id="back-home">
        <input type="submit" value="Back to Homepage" >
    </form>
    <audio id="musicPlayer" controls=""></audio>
    <div class="textgrid-overflow">
        <div id="waveform"></div>
        <div id="waveform-timeline"></div>
        <!--  Chart for Pitch, Intensity and Formant -->
        <div id="drawings" class="arial medium-font">
            <svg  id = "axis"></svg>
            <div id="chart"></div>
        </div>
    </div>
    <!-- Using wavesurfer for rendering audio waveform -->
    <div id="slider_div">
    <img src="icon/zoom-out.svg" alt="None" width="16" height="16"/>
    <input id="slider" type="range" min="100" max="1000" value="100" style="width: 30%" />
    <img src="icon/zoom-in.svg" alt="None" width="16" height="16"/>
    </div>
    <script src="https://unpkg.com/wavesurfer.js"></script> <!-- Wavesurfer package -->
    <!-- <script src="node_modules/wavesurfer.js/dist/wavesurfer.js"></script> -->
    <script src="//unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js" ></script> <!-- Timeline package -->
    <script src="https://wavesurfer-js.org/plugins/timeline.js"></script>
    <script src="//unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"></script>
    <script src="https://d3js.org/d3.v3.js"></script>
    <script src="viewer.js"></script>
    </body>
</html>